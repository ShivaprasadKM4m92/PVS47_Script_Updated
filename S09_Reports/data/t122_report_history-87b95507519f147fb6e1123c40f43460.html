var signal=signal||{};
signal.reportHistory=function(){var a=null,c=function(){"undefined"!=typeof a&&null!=a&&a.clear().draw()},d=function(){"undefined"!=typeof a&&null!=a&&($("#report-history-fetch").show(),c(),a.ajax.reload(function(){$("#report-history-fetch").hide()}))};return{init_report_history_table:function(c){"undefined"!=typeof a&&null!=a?d():a=$("#reportsHistory").DataTable({sPaginationType:"bootstrap",ajax:{url:c,dataSrc:""},aaSorting:[[5,"desc"]],bLengthChange:!0,iDisplayLength:50,aLengthMenu:[[50,100,200,
1E3,-1],[50,100,200,1E3,"All"]],fnDrawCallback:function(a){$(".downloadReport li").click(function(){var a=$(this).parent().data("report-id"),b=$(this).data("type");window.location.href=downloadReportUrl+"?id="+a+"&type="+b})},aoColumns:[{mData:"reportName",className:"dt-center"},{mData:"dataSource",className:"dt-center"},{mData:"productName",className:"dt-center"},{mData:"reportType",className:"dt-center"},{mData:"summaryDateRange",className:"dt-center"},{mData:"generatedOn",className:"dt-center",
width:"15%"},{width:"5%",mRender:function(a,c,b){return"ICSRs by Case Characteristics"!==b.reportType?b.reportGenerated?'<li class="dropdown downloadReport" style="list-style: none;"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" title="Export to"><i class="mdi mdi-export blue-1 font-22" aria-hidden="true"></i> <span class="caret hidden"></span></a><ul class="dropdown-menu dropdown-menu-right" style="min-width: 70px" data-report-id="'+
b.downloadId+'"><li data-type="PDF"><a href="#"><img src="/signal/assets/pdf-icon.jpg" class="pdf-icon" height="16" width="16">Save as PDF</a></li><li data-type="XLSX"><a href="#"><img src="/signal/assets/excel.gif" class="pdf-icon" height="16" width="16">Save as Excel</a></li><li data-type="DOCX"><a href="#"><img src="/signal/assets/word-icon.png" class="pdf-icon" height="16" width="16">Save as Word</a></li></ul></li>':'<i class="fa fa-spinner fa-spin fa-lg es-generating popoverMessage" data-content="Generating" ></i>':
b.reportGenerated?'<a href="'+viewICSRReportUrl+"?reportHistoryId="+b.downloadId+'" role="button" aria-haspopup="true" aria-expanded="false" target="_blank" title="Show report"><i class="mdi mdi-file-chart blue-1 font-20"></i></a>':'<i class="fa fa-spinner fa-spin fa-lg es-generating popoverMessage" data-content="Generating" ></i>'}}],columnDefs:[{targets:"_all",render:$.fn.dataTable.render.text()}]})},clear_report_history_table:c,refresh_report_history_table:d}}();